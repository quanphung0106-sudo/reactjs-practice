{"ast":null,"code":"var _jsxFileName = \"/home/quanphung/WorkSpace-WSL/ReactJS/chat-app-2022/src/pages/new/New.jsx\",\n    _s = $RefreshSig$();\n\nimport DriveFolderUploadOutlinedIcon from \"@mui/icons-material/DriveFolderUploadOutlined\";\nimport Sidebar from \"../../components/sidebar/Sidebar\";\nimport Navbar from \"../../components/navbar/Navbar\";\nimport \"./new.scss\";\nimport { useEffect, useState } from \"react\";\nimport { serverTimestamp, setDoc, doc } from \"firebase/firestore\";\nimport { createUserWithEmailAndPassword } from \"firebase/auth\";\nimport { auth, db, storage } from \"../../firebase\";\nimport { ref, uploadBytesResumable, getDownloadURL } from \"firebase/storage\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst New = _ref => {\n  _s();\n\n  let {\n    inputs,\n    title\n  } = _ref;\n  const [file, setFile] = useState(\"\");\n  const [data, setData] = useState({});\n  const [per, setPer] = useState(null);\n  let navigate = useNavigate();\n  useEffect(() => {\n    const name = new Date().getTime() + file.name;\n\n    const uploadFile = () => {\n      const storageRef = ref(storage, file.name);\n      const uploadTask = uploadBytesResumable(storageRef, file);\n      uploadTask.on(\"state_changed\", snapshot => {\n        const progress = snapshot.bytesTransferred / snapshot.totalBytes * 100; // console.log(\"Upload is \" + progress + \"% done\");\n\n        setPer(progress);\n\n        switch (snapshot.state) {\n          case \"paused\":\n            console.log(\"Upload is paused\");\n            break;\n\n          case \"running\":\n            console.log(\"Upload is running\");\n            break;\n\n          default:\n            break;\n        }\n      }, error => {\n        console.log(error);\n      }, () => {\n        getDownloadURL(uploadTask.snapshot.ref).then(downloadURL => {\n          setData(prev => ({ ...prev,\n            img: downloadURL\n          }));\n        });\n      });\n    };\n\n    file && uploadFile();\n  }, [file]); // console.log(data);\n\n  const handleInput = e => {\n    const id = e.target.id;\n    const value = e.target.value;\n    setData({ ...data,\n      [id]: value\n    });\n  };\n\n  const handleAdd = async e => {\n    e.preventDefault();\n\n    try {\n      const res = await createUserWithEmailAndPassword(auth, data.email, data.password);\n      await setDoc(doc(db, \"users\", res.user.uid), { ...data,\n        timeStamp: serverTimestamp()\n      }); // console.log(res);\n\n      navigate(-1);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"new\",\n    children: [/*#__PURE__*/_jsxDEV(Sidebar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"newContainer\",\n      children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"top\",\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bottom\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"left\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: file ? URL.createObjectURL(file) : \"https://icon-library.com/images/no-image-icon/no-image-icon-0.jpg\",\n            alt: \"image\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"right\",\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleAdd,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"formInput\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"file\",\n                children: [\"Image: \", /*#__PURE__*/_jsxDEV(DriveFolderUploadOutlinedIcon, {\n                  className: \"icon\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 105,\n                  columnNumber: 26\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 104,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"file\",\n                onChange: e => setFile(e.target.files[0]),\n                id: \"file\",\n                style: {\n                  display: \"none\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 107,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 15\n            }, this), inputs.map(input => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"formInput\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: input.label\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 116,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                id: input.id,\n                type: input.type,\n                placeholder: input.placeholder,\n                onChange: handleInput\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 117,\n                columnNumber: 19\n              }, this)]\n            }, input.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 17\n            }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n              disabled: per !== null && per < 100,\n              type: \"submit\",\n              children: \"Send\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this);\n};\n\n_s(New, \"oj8G7899cA6on8O5eGQkogCXqZM=\", false, function () {\n  return [useNavigate];\n});\n\n_c = New;\nexport default New;\n\nvar _c;\n\n$RefreshReg$(_c, \"New\");","map":{"version":3,"names":["DriveFolderUploadOutlinedIcon","Sidebar","Navbar","useEffect","useState","serverTimestamp","setDoc","doc","createUserWithEmailAndPassword","auth","db","storage","ref","uploadBytesResumable","getDownloadURL","useNavigate","New","inputs","title","file","setFile","data","setData","per","setPer","navigate","name","Date","getTime","uploadFile","storageRef","uploadTask","on","snapshot","progress","bytesTransferred","totalBytes","state","console","log","error","then","downloadURL","prev","img","handleInput","e","id","target","value","handleAdd","preventDefault","res","email","password","user","uid","timeStamp","err","URL","createObjectURL","files","display","map","input","label","type","placeholder"],"sources":["/home/quanphung/WorkSpace-WSL/ReactJS/chat-app-2022/src/pages/new/New.jsx"],"sourcesContent":["import DriveFolderUploadOutlinedIcon from \"@mui/icons-material/DriveFolderUploadOutlined\";\nimport Sidebar from \"../../components/sidebar/Sidebar\";\nimport Navbar from \"../../components/navbar/Navbar\";\nimport \"./new.scss\";\nimport { useEffect, useState } from \"react\";\nimport { serverTimestamp, setDoc, doc } from \"firebase/firestore\";\nimport { createUserWithEmailAndPassword } from \"firebase/auth\";\nimport { auth, db, storage } from \"../../firebase\";\nimport { ref, uploadBytesResumable, getDownloadURL } from \"firebase/storage\";\nimport { useNavigate } from \"react-router-dom\";\n\nconst New = ({ inputs, title }) => {\n  const [file, setFile] = useState(\"\");\n  const [data, setData] = useState({});\n  const [per, setPer] = useState(null);\n  let navigate = useNavigate();\n\n  useEffect(() => {\n    const name = new Date().getTime() + file.name;\n    const uploadFile = () => {\n      const storageRef = ref(storage, file.name);\n      const uploadTask = uploadBytesResumable(storageRef, file);\n      uploadTask.on(\n        \"state_changed\",\n        (snapshot) => {\n          const progress =\n            (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n          // console.log(\"Upload is \" + progress + \"% done\");\n          setPer(progress);\n          switch (snapshot.state) {\n            case \"paused\":\n              console.log(\"Upload is paused\");\n              break;\n            case \"running\":\n              console.log(\"Upload is running\");\n              break;\n            default:\n              break;\n          }\n        },\n        (error) => {\n          console.log(error);\n        },\n        () => {\n          getDownloadURL(uploadTask.snapshot.ref).then((downloadURL) => {\n            setData((prev) => ({ ...prev, img: downloadURL }));\n          });\n        }\n      );\n    };\n    file && uploadFile();\n  }, [file]);\n\n  // console.log(data);\n\n  const handleInput = (e) => {\n    const id = e.target.id;\n    const value = e.target.value;\n\n    setData({ ...data, [id]: value });\n  };\n\n  const handleAdd = async (e) => {\n    e.preventDefault();\n    try {\n      const res = await createUserWithEmailAndPassword(\n        auth,\n        data.email,\n        data.password\n      );\n      await setDoc(doc(db, \"users\", res.user.uid), {\n        ...data,\n        timeStamp: serverTimestamp(),\n      });\n      // console.log(res);\n      navigate(-1);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  return (\n    <div className=\"new\">\n      <Sidebar />\n      <div className=\"newContainer\">\n        <Navbar />\n        <div className=\"top\">\n          <h1>{title}</h1>\n        </div>\n        <div className=\"bottom\">\n          <div className=\"left\">\n            <img\n              src={\n                file\n                  ? URL.createObjectURL(file)\n                  : \"https://icon-library.com/images/no-image-icon/no-image-icon-0.jpg\"\n              }\n              alt=\"image\"\n            />\n          </div>\n          <div className=\"right\">\n            <form onSubmit={handleAdd}>\n              <div className=\"formInput\">\n                <label htmlFor=\"file\">\n                  Image: <DriveFolderUploadOutlinedIcon className=\"icon\" />\n                </label>\n                <input\n                  type=\"file\"\n                  onChange={(e) => setFile(e.target.files[0])}\n                  id=\"file\"\n                  style={{ display: \"none\" }}\n                />\n              </div>\n              {inputs.map((input) => (\n                <div className=\"formInput\" key={input.id}>\n                  <label>{input.label}</label>\n                  <input\n                    id={input.id}\n                    type={input.type}\n                    placeholder={input.placeholder}\n                    onChange={handleInput}\n                  />\n                </div>\n              ))}\n              <button disabled={per !== null && per < 100} type=\"submit\">\n                Send\n              </button>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default New;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}