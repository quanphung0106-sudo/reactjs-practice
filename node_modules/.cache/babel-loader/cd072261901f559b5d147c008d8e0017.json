{"ast":null,"code":"var _jsxFileName = \"/home/quanphung/WorkSpace-WSL/ReactJS/chat-app-2022/src/components/widget/Widget.jsx\",\n    _s = $RefreshSig$();\n\nimport KeyboardArrowUpOutlinedIcon from \"@mui/icons-material/KeyboardArrowUpOutlined\";\nimport KeyboardArrowDownOutlinedIcon from \"@mui/icons-material/KeyboardArrowDownOutlined\";\nimport PersonOutlineOutlinedIcon from \"@mui/icons-material/PersonOutlineOutlined\";\nimport AccountBalanceWalletOutlinedIcon from \"@mui/icons-material/AccountBalanceWalletOutlined\";\nimport ShoppingCartOutlinedIcon from \"@mui/icons-material/ShoppingCartOutlined\";\nimport MonetizationOnOutlinedIcon from \"@mui/icons-material/MonetizationOnOutlined\";\nimport \"./widget.scss\";\nimport { useEffect, useState } from \"react\";\nimport { db } from \"../../firebase\";\nimport { query, collection, where, getDoc, getDocs } from \"firebase/firestore\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Widget = _ref => {\n  _s();\n\n  let {\n    type\n  } = _ref;\n  const [amount, setAmount] = useState(null);\n  const [diff, setDiff] = useState(null);\n  let data;\n\n  switch (type) {\n    case \"user\":\n      data = {\n        title: \"USERS\",\n        isMoney: false,\n        link: \"See all users\",\n        query: \"users\",\n        icon: /*#__PURE__*/_jsxDEV(PersonOutlineOutlinedIcon, {\n          className: \"icon\",\n          style: {\n            color: \"crimson\",\n            backgroundColor: \"rgba(255, 0, 0, 0.2)\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 25,\n          columnNumber: 11\n        }, this)\n      };\n      break;\n\n    case \"order\":\n      data = {\n        title: \"ORDERS\",\n        isMoney: false,\n        link: \"View all orders\",\n        icon: /*#__PURE__*/_jsxDEV(ShoppingCartOutlinedIcon, {\n          className: \"icon\",\n          style: {\n            color: \"goldenrod\",\n            backgroundColor: \"rgba(218, 165, 32, 0.2)\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 11\n        }, this)\n      };\n      break;\n\n    case \"earning\":\n      data = {\n        title: \"EARNING\",\n        isMoney: true,\n        link: \"View net earnings\",\n        icon: /*#__PURE__*/_jsxDEV(MonetizationOnOutlinedIcon, {\n          className: \"icon\",\n          style: {\n            color: \"greeb\",\n            backgroundColor: \"rgba(0, 128, 0, 0.2)\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this)\n      };\n      break;\n\n    case \"product\":\n      data = {\n        title: \"PRODUCTS\",\n        query: \"products\",\n        link: \"See details\",\n        icon: /*#__PURE__*/_jsxDEV(AccountBalanceWalletOutlinedIcon, {\n          className: \"icon\",\n          style: {\n            color: \"purple\",\n            backgroundColor: \"rgba(128, 0, 128, 0.2)\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this)\n      };\n      break;\n\n    default:\n      break;\n  }\n\n  useEffect(() => {\n    const fetchData = async () => {\n      const today = new Date(); //cuối tháng trước\n\n      const lastMonth = new Date(new Date().setMonth(today.getMonth() - 1)); //tính từ đầu tháng trước\n\n      const prevMonth = new Date(new Date().setMonth(today.getMonth() - 2)); // console.log(\"lastMonth\", lastMonth);\n      // console.log(\"prevMonth\", prevMonth);\n      // Lấy ra danh sách người đăng ký từ cuối tháng trước đến ngày hôm nay\n\n      const lastMonthQuery = query(collection(db, data.query), where(\"timeStamp\", \"<=\", today), where(\"timeStamp\", \">\", lastMonth)); //Lấy ra danh sách người đăng ký từ đầu tháng trước đến cuối tháng trước\n\n      const prevMonthQuery = query(collection(db, data.query), where(\"timeStamp\", \"<=\", lastMonth), where(\"timeStamp\", \">\", prevMonth));\n      const lastMonthData = await getDocs(lastMonthQuery);\n      const prevMonthData = await getDocs(prevMonthQuery);\n      setAmount(lastMonthData.docs.length);\n      setDiff((lastMonthData.docs.length - prevMonthData.docs.length) / prevMonthData.docs.length * 100);\n    };\n\n    fetchData();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"widget\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"left\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"title\",\n        children: data.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"counter\",\n        children: [data.isMoney && \"$\", \" \", amount]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"link\",\n        children: data.link\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"right\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: `percentage ${diff < 0 ? \"negative\" : \"positive\"}`,\n        children: [diff < 0 ? /*#__PURE__*/_jsxDEV(KeyboardArrowDownOutlinedIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 23\n        }, this) : /*#__PURE__*/_jsxDEV(KeyboardArrowUpOutlinedIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 59\n        }, this), diff, \"%\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 9\n      }, this), data.icon]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 128,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Widget, \"JEkY4qFquY2+fzAs8KVfiszQDAM=\");\n\n_c = Widget;\nexport default Widget;\n\nvar _c;\n\n$RefreshReg$(_c, \"Widget\");","map":{"version":3,"names":["KeyboardArrowUpOutlinedIcon","KeyboardArrowDownOutlinedIcon","PersonOutlineOutlinedIcon","AccountBalanceWalletOutlinedIcon","ShoppingCartOutlinedIcon","MonetizationOnOutlinedIcon","useEffect","useState","db","query","collection","where","getDoc","getDocs","Widget","type","amount","setAmount","diff","setDiff","data","title","isMoney","link","icon","color","backgroundColor","fetchData","today","Date","lastMonth","setMonth","getMonth","prevMonth","lastMonthQuery","prevMonthQuery","lastMonthData","prevMonthData","docs","length"],"sources":["/home/quanphung/WorkSpace-WSL/ReactJS/chat-app-2022/src/components/widget/Widget.jsx"],"sourcesContent":["import KeyboardArrowUpOutlinedIcon from \"@mui/icons-material/KeyboardArrowUpOutlined\";\nimport KeyboardArrowDownOutlinedIcon from \"@mui/icons-material/KeyboardArrowDownOutlined\";\nimport PersonOutlineOutlinedIcon from \"@mui/icons-material/PersonOutlineOutlined\";\nimport AccountBalanceWalletOutlinedIcon from \"@mui/icons-material/AccountBalanceWalletOutlined\";\nimport ShoppingCartOutlinedIcon from \"@mui/icons-material/ShoppingCartOutlined\";\nimport MonetizationOnOutlinedIcon from \"@mui/icons-material/MonetizationOnOutlined\";\nimport \"./widget.scss\";\nimport { useEffect, useState } from \"react\";\nimport { db } from \"../../firebase\";\nimport { query, collection, where, getDoc, getDocs } from \"firebase/firestore\";\n\nconst Widget = ({ type }) => {\n  const [amount, setAmount] = useState(null);\n  const [diff, setDiff] = useState(null);\n  let data;\n\n  switch (type) {\n    case \"user\":\n      data = {\n        title: \"USERS\",\n        isMoney: false,\n        link: \"See all users\",\n        query: \"users\",\n        icon: (\n          <PersonOutlineOutlinedIcon\n            className=\"icon\"\n            style={{\n              color: \"crimson\",\n              backgroundColor: \"rgba(255, 0, 0, 0.2)\",\n            }}\n          />\n        ),\n      };\n      break;\n    case \"order\":\n      data = {\n        title: \"ORDERS\",\n        isMoney: false,\n        link: \"View all orders\",\n        icon: (\n          <ShoppingCartOutlinedIcon\n            className=\"icon\"\n            style={{\n              color: \"goldenrod\",\n              backgroundColor: \"rgba(218, 165, 32, 0.2)\",\n            }}\n          />\n        ),\n      };\n      break;\n    case \"earning\":\n      data = {\n        title: \"EARNING\",\n        isMoney: true,\n        link: \"View net earnings\",\n        icon: (\n          <MonetizationOnOutlinedIcon\n            className=\"icon\"\n            style={{\n              color: \"greeb\",\n              backgroundColor: \"rgba(0, 128, 0, 0.2)\",\n            }}\n          />\n        ),\n      };\n      break;\n    case \"product\":\n      data = {\n        title: \"PRODUCTS\",\n        query: \"products\",\n        link: \"See details\",\n        icon: (\n          <AccountBalanceWalletOutlinedIcon\n            className=\"icon\"\n            style={{\n              color: \"purple\",\n              backgroundColor: \"rgba(128, 0, 128, 0.2)\",\n            }}\n          />\n        ),\n      };\n      break;\n\n    default:\n      break;\n  }\n\n  useEffect(() => {\n    const fetchData = async () => {\n      const today = new Date();\n\n      //cuối tháng trước\n      const lastMonth = new Date(new Date().setMonth(today.getMonth() - 1));\n      \n      //tính từ đầu tháng trước\n      const prevMonth = new Date(new Date().setMonth(today.getMonth() - 2));\n\n      // console.log(\"lastMonth\", lastMonth);\n      // console.log(\"prevMonth\", prevMonth);\n\n      // Lấy ra danh sách người đăng ký từ cuối tháng trước đến ngày hôm nay\n      const lastMonthQuery = query(\n        collection(db, data.query),\n        where(\"timeStamp\", \"<=\", today),\n        where(\"timeStamp\", \">\", lastMonth)\n      );\n\n      //Lấy ra danh sách người đăng ký từ đầu tháng trước đến cuối tháng trước\n      const prevMonthQuery = query(\n        collection(db, data.query),\n        where(\"timeStamp\", \"<=\", lastMonth),\n        where(\"timeStamp\", \">\", prevMonth)\n      );\n      const lastMonthData = await getDocs(lastMonthQuery);\n      const prevMonthData = await getDocs(prevMonthQuery);\n\n      setAmount(lastMonthData.docs.length);\n      setDiff(\n        ((lastMonthData.docs.length - prevMonthData.docs.length) /\n          prevMonthData.docs.length) *\n          100\n      );\n    };\n    fetchData();\n  }, []);\n\n  return (\n    <div id=\"widget\">\n      <div className=\"left\">\n        <span className=\"title\">{data.title}</span>\n        <span className=\"counter\">\n          {data.isMoney && \"$\"} {amount}\n        </span>\n        <span className=\"link\">{data.link}</span>\n      </div>\n      <div className=\"right\">\n        <div className={`percentage ${diff < 0 ? \"negative\" : \"positive\"}`}>\n          {diff < 0 ? <KeyboardArrowDownOutlinedIcon /> : <KeyboardArrowUpOutlinedIcon />}\n          {diff}%\n        </div>\n        {data.icon}\n      </div>\n    </div>\n  );\n};\n\nexport default Widget;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}